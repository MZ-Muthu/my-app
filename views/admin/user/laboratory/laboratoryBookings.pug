extends ../../layout/adminBase

block append script 
    script(src="/JS/bundle/admin/bundleAdmin.js")       

block block 
    #right.col-9 
        .p-3
            .d-flex
                .flex-grow-1
                    h5.fw-bold.mt-3.ms-3.fs-5 Laboratory Booking Management
                    hr.m-0
                    .modal-body.table-responsive.mt-2
                        table.table.table-bordered.table-font
                            thead
                                tr
                                    th.color-white.main-color-background(scope='col')
                                        | User Name
                                    th.color-white.main-color-background(scope='col')
                                        | Phone Number
                                    th.color-white.main-color-background(scope='col')
                                        | Booked Date
                                    th.color-white.main-color-background(scope='col')
                                        | Requested Date
                                    th.color-white.main-color-background(scope='col')
                                        | Update Status
                                    th.color-white.main-color-background(scope='col')
                                        | Details
                                    th.color-white.main-color-background(scope='col')
                                        | Cancel
                            tbody#update_laboratory_vendor_status(data-id=partner.hiwpmID)
                                each doc,index in booking.active
                                    tr
                                        td= doc.name
                                        td= doc.phone
                                        td= new Date(doc.createdAt).toLocaleDateString()
                                        td=  new Date(doc.requestDate).toLocaleDateString()
                                        td= doc.status
                                        td
                                            a.text-primary.cursor-pointer(data-bs-toggle='modal' data-bs-target=`#activeHearingaidBooking-${index}`) View

                                            // Modal
                                            .modal.fade(data-bs-backdrop='static' data-bs-keyboard='false' tabindex='-1' aria-labelledby='staticBackdropLabel' aria-hidden='true' id=`activeHearingaidBooking-${index}`)
                                                .modal-dialog.modal-dialog-scrollable
                                                    .modal-content
                                                        .modal-header
                                                            h5#staticBackdropLabel.modal-title
                                                                | Booking Details
                                                            button.btn-close(type='button' data-bs-dismiss='modal' aria-label='Close')
                                                        .modal-body.table-responsive
                                                            table.table.table-bordered
                                                                thead
                                                                    tr
                                                                        th.color-white.main-color-background.text-center(scope='col')
                                                                            | Booking Details
                                                                        th.color-white.main-color-background.text-center(scope='col')
                                                                            //- | Booking ID - 09869766875
                                                                tbody
                                                                    tr
                                                                        th(scope='row') User name
                                                                        td= doc.name
                                                                    tr
                                                                        th(scope='row') User Phone
                                                                        td= doc.phone
                                                                    tr
                                                                        th(scope='row') Booked Date
                                                                        td= new Date(doc.createdAt).toLocaleString()
                                                                    tr
                                                                        th(scope='row') Requested Date
                                                                        td=  new Date(doc.requestDate).toLocaleDateString()
                                                                    tr
                                                                        th(scope='row') Status
                                                                        td= doc.status
                                                                    tr
                                                                        th(scope='row') Scheduled Time
                                                                        td= doc.scheduleTime ? doc.scheduleTime : "-"
                                                                    tr
                                                                        th(scope='row') Vendor Action Date
                                                                        td= doc.vendorActionDate ? new Date(doc.vendorActionDate).toLocaleString() : "-"
                                                                    tr
                                                                        th(scope='row') Vendor Response
                                                                        td= doc.vendorResposnse ? doc.vendorResposnse : "-"
                                                                    
                                                                    
                                                        .modal-footer
                                                            button.btn.btn-secondary(type='button' data-bs-dismiss='modal')
                                                                | Cancel
                                        td.d-grid 
                                            a.btn.btn-danger.cancel_user_laboratory_booking_status(data-id=user.id data-id2=doc.hiwlbbssID) Cancel
                    .d-flex.mt-3
                        .flex-grow-1
                            h5.fw-bold.mt-3.ms-3.fs-5 Previous booking
                    hr.m-0
                    .modal-body.table-responsive.mt-2
                        table.table.table-bordered.table-font
                            thead
                                tr
                                    th.color-white.main-color-background.text-center(scope='col')
                                        | User Name
                                    th.color-white.main-color-background.text-center(scope='col')
                                        | Phone Number
                                    th.color-white.main-color-background.text-center(scope='col')
                                        | Booked Date
                                    th.color-white.main-color-background.text-center(scope='col')
                                        | Requested Date
                                    th.color-white.main-color-background.text-center(scope='col')
                                        | Update Status
                                    th.color-white.main-color-background.text-center(scope='col')
                                        | Details
                            tbody
                                each doc,index in booking.history
                                    tr
                                        td= doc.name
                                        td= doc.phone
                                        td= new Date(doc.createdAt).toLocaleDateString()
                                        td= new Date(doc.requestDate).toLocaleDateString()
                                        td= doc.status
                                        td
                                            a.text-primary.cursor-pointer(data-bs-toggle='modal' data-bs-target=`#historyLabBooking-${index}`) View

                                            // Modal
                                            .modal.fade(data-bs-backdrop='static' data-bs-keyboard='false' tabindex='-1' aria-labelledby='staticBackdropLabel' aria-hidden='true' id=`historyLabBooking-${index}`)
                                                .modal-dialog.modal-dialog-scrollable
                                                    .modal-content
                                                        .modal-header
                                                            h5#staticBackdropLabel.modal-title
                                                                | Booking Details
                                                            button.btn-close(type='button' data-bs-dismiss='modal' aria-label='Close')
                                                        .modal-body.table-responsive
                                                            table.table.table-bordered
                                                                thead
                                                                    tr
                                                                        th.color-white.main-color-background.text-center(scope='col')
                                                                            | Booking Details
                                                                        th.color-white.main-color-background.text-center(scope='col')
                                                                            //- | Booking ID - 09869766875
                                                                tbody
                                                                    tr
                                                                        th(scope='row') User name
                                                                        td= doc.name
                                                                    tr
                                                                        th(scope='row') User Phone
                                                                        td= doc.phone
                                                                    tr
                                                                        th(scope='row') Booked Date
                                                                        td= new Date(doc.createdAt).toLocaleString()
                                                                    tr
                                                                        th(scope='row') Requested Date
                                                                        td=new Date(doc.requestDate).toLocaleDateString()
                                                                    tr
                                                                        th(scope='row') Status
                                                                        td= doc.status
                                                                    tr
                                                                        th(scope='row') Scheduled Time
                                                                        td= doc.scheduleTime ? doc.scheduleTime : "-"
                                                                    tr
                                                                        th(scope='row') Vendor Action Date
                                                                        td= doc.vendorActionDate ? new Date(doc.vendorActionDate).toLocaleString() : "-"
                                                                    tr
                                                                        th(scope='row') Vendor Response
                                                                        td= doc.vendorResposnse ? doc.vendorResposnse : "-"
                                                                    
                                                                    
                                                        .modal-footer
                                                            button.btn.btn-secondary(type='button' data-bs-dismiss='modal')
                                                                | Cancel